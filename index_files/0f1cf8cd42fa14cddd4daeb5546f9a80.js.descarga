!function(p){"use strict";var b,u,m;function v(n){return joinchat_obj.settings.message_send.replace("{AGENT}",n)}function n(){if(joinchat_obj.settings&&joinchat_obj.settings.agents){var t,i=joinchat_obj.settings.agents,n=!!joinchat_obj.settings.message_hash,a=!!joinchat_obj.$(".joinchat__channels").length,c=(e=new Date,f=e.getTimezoneOffset()+i.gtm_offset,new Date(e.getTime()+6e4*f)),_=c.getDay(),s=p.extend({},i.list),e=["joinchat__agents","joinchat__contact"],h="",l=!0;if(joinchat_obj.expand_agents=function(){l=!1;var n=joinchat_obj.$(".joinchat__box__scroll");joinchat_obj.$(".joinchat__agents").removeClass("joinchat__agents--collapsed"),n.animate({scrollTop:t[0].offsetTop-n[0].offsetTop-10},200)},s=p.map(s,function(o){var a,e,n,t=o.days[_];return"boolean"==typeof t?o.online=t:(o.online=!1,p.each(t.split(" "),function(n,t){var t=t.split("-"),a=t[0].split(":"),e=new Date(c.getFullYear(),c.getMonth(),c.getDate(),parseInt(a[0]),parseInt(a[1]),0),t="00:00"==t[1]?new Date(c.getFullYear(),c.getMonth(),c.getDate()+1,0,0,0):(a=t[1].split(":"),new Date(c.getFullYear(),c.getMonth(),c.getDate(),parseInt(a[0]),parseInt(a[1]),0));e<=c&&c<t&&(o.online=!0)})),!o.online&&i.offline_show&&(a=6048e5,e=[],p.each(o.days,function(n,t){var a=n<_?n-_+7:n-_;!0===t?e.push(new Date(c.getFullYear(),c.getMonth(),c.getDate()+a,0,0,0)):!1!==t&&p.each(t.split(" "),function(n,t){t=t.split("-")[0].split(":");e.push(new Date(c.getFullYear(),c.getMonth(),c.getDate()+a,parseInt(t[0]),parseInt(t[1]),0))})}),p.each(e,function(n,t){c<t&&t-c<a&&(a=t-c)}),6048e5==a?o.back="···":864e5<a?(n=Math.ceil(a/864e5),o.back=i.i18n.d[1<a?1:0].replace("%s",n)):36e5<a?(n=Math.ceil(a/36e5),o.back=i.i18n.h[1<a?1:0].replace("%s",n)):6e4<a?(n=Math.ceil(a/6e4),o.back=i.i18n.m[1<a?1:0].replace("%s",n)):o.back=i.i18n.m[0].replace("%s",1)),o}),0==(s=i.offline_show?s:p.grep(s,function(n){return n.online})).length)joinchat_obj.$div.addClass("joinchat--hidden");else if(n||1!=s.length||joinchat_obj.settings.chatbot||a){if(i.random_order)for(var o=s,j=o.length-1;0<j;j--){var r=Math.floor(Math.random()*(j+1)),d=o[j];o[j]=o[r],o[r]=d}var g,f,l=f=n&&1<s.length;i.offline_show&&i.offline_contact&&e.push("joinchat__agents--offline-contact"),f&&e.push("joinchat__agents--collapsed"),p.each(s,function(n,t){var a=t.online?"joinchat__agent--online":"joinchat__agent--offline",e='data-id="'+n+'"',o="";0==n&&(e+=5<s.length?' data-count="+'+(s.length-5)+'"':"",o='data-start="'+joinchat_obj.$(".joinchat__button__sendtext").text()+'"'),h+='<div class="joinchat__agent__wrapper"><div class="joinchat__agent {{classes}}" {{data_agent}}> <div class="joinchat__agent__image" style="{{image}}"></div> <div class="joinchat__agent__info" {{data_info}}>  <div class="joinchat__agent__name">{{name}}</div>  <div class="joinchat__agent__role">{{role}}</div> </div> <div class="joinchat__agent__out">{{back}}</div></div></div>'.replace("{{data_agent}}",e).replace("{{data_info}}",o).replace("{{classes}}",a).replace("{{name}}",t.name).replace("{{role}}",t.role).replace("{{image}}",t.image?"background-image:url("+t.image+");":"").replace("{{back}}",t.back||"")}),t=p('<div class="'+e.join(" ")+'">'+h+"</div>"),joinchat_obj.$(".joinchat__box__content").append(t),t[0].style.setProperty("--agents",s.length),f&&p(document).on("joinchat:hide",function(){l=!0,setTimeout(function(){t.addClass("joinchat__agents--collapsed")},500)}),t.on("click",".joinchat__agent",function(){var n=s[p(this).data("id")];l?joinchat_obj.expand_agents():(n.online||i.offline_contact)&&(joinchat_obj.save_hash(),joinchat_obj.chatbox_hide(),joinchat_obj.open_whatsapp(n.phone,v(n.name)))}),!joinchat_obj.is_mobile&&joinchat_obj.can_qr&&(b=joinchat_obj.$div.hasClass("joinchat--left"),g=joinchat_obj.$(".joinchat__qr"),p(document).one("joinchat:show",function(){joinchat_obj.$(".joinchat__qr canvas:not(.qr__channel)").remove(),p.each(s,function(n,t){(i.offline_contact||t.online)&&((t=joinchat_obj.qr(joinchat_obj.whatsapp_link(t.phone,v(t.name),!1))).classList.add("qr__channel","qr__channel--agent-"+n),g.append(t))})}),joinchat_obj.$(".joinchat__agent").on("mouseenter",function(){var o;l||!i.offline_contact&&p(this).hasClass("joinchat__agent--offline")||(o=this,clearTimeout(m),clearTimeout(u),g.addClass("joinchat__qr--show"),u=setTimeout(function(){var n,t,a,e;n=o.parentElement,t=Array.from(n.parentElement.children).indexOf(n),joinchat_obj.$(".qr__channel--show").removeClass("qr__channel--show"),joinchat_obj.$(".qr__channel--agent-"+t).addClass("qr__channel--show"),t=joinchat_obj.$(".joinchat__box").get(0).clientWidth,a=joinchat_obj.$(".joinchat__box").get(0).clientHeight,e=joinchat_obj.$(".joinchat__box__scroll").get(0).scrollTop,t=b?0:-1*t+16,a=a+e-n.offsetTop-n.clientHeight-8,joinchat_obj.$div.css({"--qr-x":t+"px","--qr-y":"-"+a+"px","--qr-a":"calc(var(--s)/2 - 6px)"})},200))}).on("mouseleave",function(){l||!i.offline_contact&&p(this).hasClass("joinchat__agent--offline")||(m=setTimeout(function(){g.removeClass("joinchat__qr--show")},300))}),p(document).on("joinchat:hide",function(){g.removeClass("joinchat__qr--show")})),p(document).on("joinchat:can_contact",function(){a||(t.removeClass("joinchat--hidden"),setTimeout(joinchat_obj.expand_agents,10))})}else i.offline_contact||s[0].online?(joinchat_obj.settings.telephone=s[0].phone,joinchat_obj.$(".joinchat__button").off("mouseenter mouseleave click").on("click",function(){joinchat_obj.save_hash(),joinchat_obj.open_whatsapp(s[0].phone,v(s[0].name))}),joinchat_obj.chatbox=!0,p(document).on("joinchat:hide",function(){joinchat_obj.chatbox=!0})):joinchat_obj.$div.addClass("joinchat--hidden");p(document).trigger("joinchat:agents",[s])}}window.joinchat_obj&&joinchat_obj.is_ready?n():p(document).one("joinchat:start",n)}(jQuery);
;